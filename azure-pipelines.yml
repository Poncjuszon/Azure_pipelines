# GB Depoyment for UAT & PROD
#CM plus CDs with odd number are Green
#CDs with even numbers are Blue

#Trigger must be none (default is main and it would trigger CI jobs)
trigger:
- none

#TODO not sure if generic agents will suffice
pool:
  vmImage: 'ubuntu-latest'


parameters:
  - name: environment
    displayName: Environment
    type: string
    default: DigitalHub-UAT
    values:
      - DigitalHub-UAT
      - DigitalHub-PROD

variables:
  - name: dupa
    value: 'dupa'
  - ${{ if eq(parameters.environment, 'DigitalHub-UAT') }}:
    - name: environmentShort
      value: "UAT"
    - name: azureConnection
      value: 'BIO-DCX-Dev-01-azure-connection'
  - ${{ if eq(parameters.environment, 'DigitalHub-PROD') }}:
    - name: environmentShort
      value: "PROD"
    - name: azureConnection
      value: 'BIO-DCX-Prod-01-azure-connection - Define me first!'

stages:
  - stage: one
    displayName: "Upscalling nodes and Databases"
    jobs:
      - job: IncreaseNodesSize
        displayName: "Increasing Nodes size form <normal size> to <upscalled size>"
        steps:
          - script: echo ${{parameters.environment}}
          - script: echo ${{variables.environmentShort}}
          - script: echo ${{variables.azureConnection}}
          